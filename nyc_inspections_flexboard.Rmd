---
title: "NYC_Inspections_flexdashboard"
output:  
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
#Setup code for loading appropriate libraries.
library(tidyverse)
library(p8105.datasets)
library(plotly)
```

```{r, nyc_inspections, echo=FALSE}
# Importing and managing the NYC Inspections data from the `P8105.datasets` library.
rest_inspec_clean <- rest_inspec |>
  separate(col = inspection_date, into = c("Year", "Month", "Day"), sep = "-") |>
  na.omit(grade) |>
  filter(Year != "2012") |>
  filter(boro != "Missing")
```

{data-width=650}
-----------------------------------------------------------------------

### Line plot of the average violation score by borough from 2013 to 2017.

```{r lineplot, echo=FALSE}
rest_inspec_clean |>
  filter(boro == "MANHATTAN") |>
  plot_ly(x = ~Year, y = ~score, type = "box", alpha = 0.5)
```

{data-width=350}
-----------------------------------------------------------------------

### Barchart showing distribution of grades by borough in 2016

```{r barchart, echo=FALSE}
rest_inspec_clean |>
  filter(Year == "2016") |>
  group_by(boro, grade) |>
  summarize(
    grade_count = n()) |>
  plot_ly(x = ~grade, y = ~grade_count, color = ~boro, type = "bar", colors = "viridis")
```

### Boxplot showing

```{r boxplot, echo=FALSE}
nyc_airbnb |> 
  count(neighbourhood) |> 
  mutate(neighbourhood = fct_reorder(neighbourhood, n)) |> 
  plot_ly(x = ~neighbourhood, y = ~n, color = ~neighbourhood, type = "bar", colors = "viridis")
```
